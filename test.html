<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    #quiz-container {
      max-width: 600px;
      margin: 0 auto;
    }

    .question-container {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
    }

    .options-container {
      margin-top: 10px;
    }

    .correct {
      color: green;
    }

    .incorrect {
      color: red;
    }
  </style>
  <title>Викторина</title>
</head>
<body>
  <div id="quiz-container"></div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const quizContainer = document.getElementById('quiz-container');
      let totalPoints = 0;
      let currentQuestionIndex = 0;

      function loadQuestions(callback) {
        fetch('json/quiz/questions.json')
          .then(response => response.json())
          .then(data => {
            callback(data);
          })
          .catch(error => console.error('Error loading questions:', error));
      }

      function renderQuestion() {
        loadQuestions(questions => {
          const question = questions[currentQuestionIndex];
          const questionContainer = document.createElement('div');
          questionContainer.classList.add('question-container');

          const questionText = document.createElement('div');
          questionText.textContent = question.text;
          questionContainer.appendChild(questionText);

          const points = document.createElement('div');
          points.textContent = `Баллы: ${question.points}`;
          questionText.appendChild(points);

          const optionsContainer = document.createElement('div');
          optionsContainer.classList.add('options-container');

          question.options.forEach((option, index) => {
            const optionButton = document.createElement('button');
            optionButton.textContent = option.text;

            optionButton.addEventListener('click', function() {
              if (option.correct) {
                optionButton.classList.add('correct');
                totalPoints += question.points;
              } else {
                optionButton.classList.add('incorrect');
              }

              setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < questions.length) {
                  renderQuestion();
                } else {
                  endQuiz();
                }
              }, 1000);
            });

            optionsContainer.appendChild(optionButton);
          });

          questionContainer.appendChild(optionsContainer);
          quizContainer.innerHTML = '';
          quizContainer.appendChild(questionContainer);

          setTimeout(() => {
            endQuiz();
          }, 3000);
        });
      }

      function endQuiz() {
        if (currentQuestionIndex < questions.length) {
          alert('Вы проиграли');
        } else {
          alert(`Вы выиграли! Набранные баллы: ${totalPoints}`);
        }
      }

      renderQuestion();
    });
  </script>
</body>
</html>

